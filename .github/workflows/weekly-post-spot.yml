name: Weekly Post - Spot Guide (3 times a week)

on:
  schedule:
    # 月・水・金の午前10時（JST）に実行 = UTC 1時
    - cron: '0 1 * * 1,3,5'
  workflow_dispatch: # 手動実行も可能

jobs:
  post-article:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      
      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: '8.1'
          extensions: curl, json
      
      - name: Post article to WordPress
        env:
          WP_URL: ${{ secrets.WP_URL }}
          WP_USER: ${{ secrets.WP_USER }}
          WP_APP_PASSWORD: ${{ secrets.WP_APP_PASSWORD }}
        run: |
          php scripts/post-to-wordpress.php spot
      
      - name: Notify completion
        run: |
          echo "✅ 「都道府県別の出会いスポット紹介」記事を投稿しました"
