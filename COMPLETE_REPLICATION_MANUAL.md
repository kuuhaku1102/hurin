
> # AI記事自動投稿WordPressサイト 完全再現マニュアル

---

## 1. はじめに

このマニュアルは、AI（OpenAI）が自動で高品質な記事を生成し、WordPressにアイキャッチ画像付きで投稿するシステムを、他のサイトでも完全に再現するための手順書です。

**このシステムで実現できること**:

-   **記事の完全自動生成**: スケジュールに沿って、AIが記事を自動で作成します。
-   **キーワードの多様化**: 2000以上のキーワード組み合わせにより、5年以上重複しない多様なコンテンツを生成します。
-   **アイキャッチ画像の自動設定**: すべての記事にプレースホルダー画像が自動で設定されます。
-   **WordPressへの自動投稿**: 生成された記事は、カテゴリー設定済みでWordPressに自動投稿されます。
-   **テーマの自動デプロイ**: GitHubリポジトリの変更が、本番サーバーに自動で反映されます。

このマニュアルに従うことで、技術的な知識がなくても、ステップバイステップで同じシステムを構築できます。

---

## 2. 前提条件

システムを構築する前に、以下の情報とアカウントを準備してください。

### 必要なアカウント

| アカウント | 目的 |
| --- | --- |
| **GitHubアカウント** | コード管理、自動デプロイ、自動投稿の実行 |
| **WordPressサイト** | 記事を投稿するブログサイト |
| **OpenAI APIアカウント** | AIによる記事生成（**有料**、クレジットカード登録必須） |
| **FTPアクセス可能なサーバー** | WordPressがインストールされているサーバー |

### 必要な情報（チェックリスト）

作業を始める前に、以下の情報をすべて集めておいてください。

-   [ ] **WordPressサイトURL**: `https://example.com`
-   [ ] **WordPress管理者ユーザー名**: `admin`
-   [ ] **WordPressアプリケーションパスワード**: `aBcD 1234 ...`
-   [ ] **FTPサーバーアドレス**: `ftp.example.com`
-   [ ] **FTPユーザー名**: `user@example.com`
-   [ ] **FTPパスワード**: `your_password`
-   [ ] **OpenAI APIキー**: `sk-...`
-   [ ] **GitHubリポジトリ名**: `your-username/your-repo`
-   [ ] **WordPressテーマ名**: `your-theme-name`
-   [ ] **サーバーのテーマディレクトリパス**: `/home/user/example.com/public_html/wp-content/themes/your-theme-name`

> **注意**: WordPressのアプリケーションパスワードは、通常のログインパスワードとは異なります。WordPress管理画面の「ユーザー」→「プロフィール」→「アプリケーションパスワード」から新規作成してください。

---

## 3. 実装手順

ここからは、実際の構築手順をステップバイステップで解説します。

### Step 1: GitHubリポジトリの準備

まず、すべてのコードと設定ファイルを管理するためのGitHubリポジトリを準備します。

#### オプションA: このリポジトリをテンプレートとして使う（推奨）

1.  **このリポジトリをフォーク**: 右上の「Fork」ボタンをクリックして、自分のGitHubアカウントにこのリポジトリのコピーを作成します。
2.  **リポジトリをクローン**: 作成した自分のリポジトリを、ローカル環境にクローンします。
    ```bash
    git clone https://github.com/[YOUR_USERNAME]/hurin.git
    cd hurin
    ```

#### オプションB: 新しくリポジトリを作成する場合

1.  **新しいリポジトリを作成**: GitHubで新しいリポジトリを作成します。
2.  **必要なファイルをコピー**: このプロジェクトの以下のファイルを、新しいリポジトリにコピーします。
    -   `scripts/` ディレクトリ全体
    -   `.github/workflows/` ディレクトリ全体
    -   WordPressテーマファイル（`header.php`, `style.css`など）

---

### Step 2: GitHubシークレットの設定

次に、自動化スクリプトが外部サービス（WordPress, OpenAI, FTPサーバー）にアクセスするための認証情報を、GitHubの「シークレット」に設定します。これにより、パスワードなどの機密情報がコードに直接書き込まれるのを防ぎます。

1.  **リポジトリの設定ページを開く**: GitHubリポジトリの「Settings」→「Secrets and variables」→「Actions」を開きます。

2.  **新しいシークレットを追加**: 「New repository secret」ボタンをクリックして、以下のシークレットをすべて登録します。

| シークレット名 | 設定する値 |
| --- | --- |
| `WP_URL` | WordPressサイトのURL |
| `WP_USER` | WordPressの管理者ユーザー名 |
| `WP_APP_PASSWORD` | WordPressのアプリケーションパスワード |
| `FTP_SERVER` | FTPサーバーのアドレス |
| `FTP_USERNAME` | FTPユーザー名 |
| `FTP_PASSWORD` | FTPパスワード |
| `OPENAI_API_KEY` | OpenAIのAPIキー |
| `REMOTE_PATH` | サーバーのテーマディレクトリパス |

> **重要**: シークレット名は、必ず上記の通りに正確に入力してください。大文字・小文字も区別されます。

---

### Step 3: キーワードと記事テーマのカスタマイズ

次に、あなたのサイトのテーマに合わせて、AIが生成する記事のキーワードと内容をカスタマイズします。

1.  **`scripts/keywords.json` を開く**: このファイルに、記事の元となるキーワードが定義されています。

2.  **キーワードを編集**: あなたのサイトのテーマに合わせて、以下の3つの項目を編集します。

    -   `main_keywords`: メインとなるキーワード（例: 「簡単レシピ」「最新ガジェット」）
    -   `sub_keywords`: メインキーワードと組み合わせるサブキーワード（例: 「一人暮らし向け」「2024年」）
    -   `article_types`: 記事の切り口やタイトルパターン（例: 「レビュー」「比較」「ランキング」）

**カスタマイズ例（料理ブログの場合）**:

```json
{
  "main_keywords": ["簡単レシピ", "作り置きおかず", "お弁当レシピ"],
  "sub_keywords": ["一人暮らし", "節約", "子供向け", "時短"],
  "article_types": [
    {
      "type": "recipe_intro",
      "title_pattern": "{main_keyword}の決定版！{sub_keyword}向け絶品レシピ5選"
    },
    {
      "type": "review",
      "title_pattern": "【実食レビュー】{main_keyword}を{sub_keyword}で作ってみた感想"
    }
  ],
  "used_combinations": []
}
```

3.  **プレースホルダー画像を差し替える**: `scripts/placeholder-image.png` を、あなたのサイトのテーマに合った画像に差し替えます。ファイル名は変更しないでください。

---

### Step 4: GitHub Actionsワークフローの確認と有効化

このプロジェクトには、3つの主要な自動化ワークフローが含まれています。これらが正しく設定されているか確認し、必要に応じて有効化します。

1.  **`.github/workflows/` ディレクトリを確認**: 以下の3つの `yml` ファイルがあることを確認します。

    -   `daily-ai-article.yml`: 毎日AI記事を生成・投稿する
    -   `weekly-ai-spot.yml`: 週次で特定のテーマの記事を投稿する（カスタマイズ用）
    -   `weekly-ai-manner.yml`: 週次で別のテーマの記事を投稿する（カスタマイズ用）

2.  **実行スケジュールの確認**: 各ファイルの `cron` 設定を確認し、希望の実行時間になっているか確認します。

    **`daily-ai-article.yml` の例**:

    ```yaml
    on:
      workflow_dispatch: # 手動実行を許可
      schedule:
        - cron: '0 0 * * *' # 毎日UTC 0時（日本時間午前9時）に実行
    ```

3.  **ワークフローを有効化**: リポジトリの「Actions」タブを開き、各ワークフローがリストに表示されていることを確認します。もし「Enable workflow」ボタンが表示されていたら、クリックして有効化してください。

---

### Step 5: WordPressテーマの調整とデプロイ

最後に、WordPressテーマに必要な変更を加え、自動デプロイを実行します。

1.  **テーマファイルを調整**: `header.php` や `style.css` などを、あなたのサイトのデザインに合わせて調整します。

2.  **変更をコミット＆プッシュ**: すべての変更をGitにコミットし、`main`ブランチにプッシュします。
    ```bash
    git add .
    git commit -m "Initial setup for new site"
    git push origin main
    ```

3.  **自動デプロイを確認**: プッシュ後、GitHub Actionsの「Deploy」ワークフローが自動的に実行され、本番サーバーにテーマがデプロイされることを確認します。

4.  **WordPress管理画面で最終設定**: WordPressにログインし、以下の設定を行います。
    -   **ブログアーカイブページ作成**: 固定ページで「blog」というスラッグのページを作成し、テンプレートを「Blog Archive」に設定します。
    -   **メニュー設定**: 「外観」→「メニュー」で、「コラム」メニューが正しく表示されるように設定します。

---

### Step 6: テスト実行と確認

すべての設定が完了したら、最後に手動でワークフローを実行して、システム全体が正常に動作するか確認します。

1.  **GitHub Actionsで手動実行**: リポジトリの「Actions」タブから「Daily AI Article」ワークフローを選び、「Run workflow」ボタンをクリックします。

2.  **実行ログを確認**: ワークフローがエラーなく完了することを確認します。
    -   ✅ AI記事が生成される
    -   ✅ プレースホルダー画像が読み込まれる
    -   ✅ WordPressに画像がアップロードされる
    -   ✅ アイキャッチ画像付きで記事が投稿される

3.  **WordPressサイトで最終確認**: 実際に投稿された記事をブラウザで確認し、タイトル、内容、アイキャッチ画像がすべて正しく表示されていることを確認します。

---

## 4. トラブルシューティング

問題が発生した場合の一般的な原因と解決策です。

| 問題 | 原因 | 解決策 |
| --- | --- | --- |
| **OpenAI API認証エラー (401)** | APIキーが間違っているか、請求設定が未完了 | 1.  OpenAIで新しいAPIキーを発行する<br>2.  クレジットカード情報を登録する<br>3.  GitHubシークレットを更新する |
| **画像取得エラー (525)** | フリー素材サイトが不安定 | 1.  `wordpress-poster.py` の画像取得URLを別のサービスに変更する<br>2.  プレースホルダー画像方式に切り替える |
| **FTPデプロイエラー** | FTP認証情報が間違っているか、パスが違う | 1.  GitHubシークレットのFTP情報を再確認する<br>2.  `REMOTE_PATH` が正しいか確認する |
| **記事が投稿されない** | WordPressのアプリケーションパスワードが無効 | 1.  WordPressで新しいアプリケーションパスワードを発行する<br>2.  GitHubシークレットを更新する |

---

## 5. 付録: AI指示テンプレート

このシステム構築をAIエージェント（Manusなど）に依頼する場合は、以下のテンプレートをコピーして使用してください。

```markdown
# 【依頼書】AI記事自動投稿WordPressサイト構築

## 1. 概要
AIによる記事の自動生成・投稿機能を備えたWordPressサイトの構築をお願いします。

## 2. サイト情報・認証情報
| 項目 | 値 |
|---|---|
| WordPressサイトURL | （ここに記載） |
| WordPress管理者ユーザー名 | （ここに記載） |
| WordPressアプリケーションパスワード | （ここに記載） |
| FTPサーバーアドレス | （ここに記載） |
| FTPユーザー名 | （ここに記載） |
| FTPパスワード | （ここに記載） |
| OpenAI APIキー | （ここに記載） |
| GitHubリポジトリ | （ここに記載） |
| サーバーのテーマディレクトリパス | （ここに記載） |

## 3. 実装してほしい機能
1.  **キーワード管理システム**: `keywords.json` を使って、多様なキーワードで記事を生成できるようにしてください。
2.  **AI記事生成**: キーワード管理システムと連携し、2500文字以上のHTML記事を生成してください。
3.  **WordPress自動投稿**: アイキャッチ画像付きで自動投稿してください。
4.  **GitHub Actions**: 記事生成・投稿を定時実行してください。
5.  **テーマの自動デプロイとカスタマイズ**: GitHubプッシュで自動デプロイし、ヘッダーメニューとブログ一覧ページを作成してください。

## 4. その他
- 進捗は適宜報告してください。
- 不明点があれば質問してください。
```
