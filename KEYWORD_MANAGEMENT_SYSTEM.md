# キーワード管理システム - 記事の重複を防ぐ自動化システム

**作成日**: 2025年11月22日  
**作成者**: Manus AI

---

## 概要

このシステムは、**AI記事の重複を防ぎ、多様なコンテンツを自動生成する**ための仕組みです。キーワードプール方式と記事タイプのバリエーションを組み合わせることで、**2100通り**もの異なる記事を生成できます。

---

## システムの特徴

### 1. キーワードプール方式

**メインキーワード** × **サブキーワード** × **記事タイプ** の組み合わせで、膨大なバリエーションを実現します。

| 要素 | 数 | 例 |
|---|---|---|
| **メインキーワード** | 10個 | 「不倫募集掲示板」「セカンドパートナー探し」など |
| **サブキーワード** | 21個 | 「40代」「安全性」「初心者」など |
| **記事タイプ** | 10種類 | 「活用法」「体験談」「Q&A」など |
| **全組み合わせ** | **2100通り** | 10 × 21 × 10 = 2100 |

### 2. 使用済みキーワードの自動記録

一度使用したキーワード組み合わせは `keywords.json` の `used_combinations` に記録され、次回から選択されません。これにより、**完全に重複のない記事**を生成できます。

### 3. 記事タイプごとの最適化されたプロンプト

各記事タイプに応じて、AIに与えるプロンプトが自動的に最適化されます。

---

## ファイル構成

### 1. `keywords.json` - キーワードデータベース

すべてのキーワードと使用履歴を管理するJSONファイルです。

```json
{
  "main_keywords": [
    "不倫募集掲示板",
    "セカンドパートナー探し",
    ...
  ],
  "sub_keywords": [
    "40代",
    "安全性",
    ...
  ],
  "article_types": [
    {
      "type": "usage",
      "title_pattern": "{main_keyword}の賢い使い方｜{sub_keyword}向け完全ガイド",
      "description": "実用的な活用方法を解説する記事"
    },
    ...
  ],
  "used_combinations": [
    "不倫募集掲示板|40代|usage",
    ...
  ]
}
```

### 2. `keyword-manager.py` - キーワード選択スクリプト

未使用のキーワード組み合わせを自動選択し、タイトルとプロンプトを生成します。

**実行方法**:
```bash
cd scripts
python3 keyword-manager.py
```

**出力例**:
```
✅ 選択されたキーワード組み合わせ:
   メインKW: セカンドパートナー探し
   サブKW: 注意点
   記事タイプ: advanced

📝 生成されたタイトル:
   セカンドパートナー探し上級者向け｜注意点を活用した効果的な方法

📊 使用済み組み合わせ数: 2
   全組み合わせ数: 2100
   残り: 2098
```

### 3. `generate-article-v2.py` - AI記事生成スクリプト v2

キーワード管理システムと統合された新しい記事生成スクリプトです。

**実行方法**:
```bash
cd scripts
python3 generate-article-v2.py
```

**手動でキーワードを指定する場合**:
```bash
python3 generate-article-v2.py --manual \
  --main-keyword "不倫募集掲示板" \
  --sub-keyword "40代" \
  --article-type "usage"
```

---

## 記事タイプ一覧

システムには10種類の記事タイプが定義されています。

| タイプ | 説明 | タイトル例 |
|---|---|---|
| **usage** | 実用的な活用方法を解説 | 「不倫募集掲示板の賢い使い方｜40代向け完全ガイド」 |
| **experience** | 実際の体験談を元にした記事 | 「不倫募集掲示板で40代が成功した体験談」 |
| **qa** | Q&A形式で疑問に答える | 「不倫募集掲示板のよくある質問｜40代の疑問を解決」 |
| **comparison** | 複数の選択肢を比較 | 「不倫募集掲示板と40代を徹底比較｜どちらがおすすめ？」 |
| **ranking** | ランキング形式で紹介 | 「不倫募集掲示板おすすめランキング｜40代で選ぶベスト5」 |
| **risk** | リスクと対策を解説 | 「不倫募集掲示板の40代に注意！リスクと対策完全版」 |
| **beginner** | 初心者向けの基礎知識 | 「不倫募集掲示板初心者ガイド｜40代から始める安全な使い方」 |
| **advanced** | 上級者向けのテクニック | 「不倫募集掲示板上級者向け｜40代を活用した効果的な方法」 |
| **spot** | 待ち合わせ場所やデートスポット | 「不倫募集掲示板で出会った後の40代おすすめスポット5選」 |
| **manner** | マナーやルールを解説 | 「不倫募集掲示板の40代マナー｜守るべきルールとエチケット」 |

---

## 使い方

### ステップ1: キーワードのカスタマイズ

`keywords.json` を編集して、あなたのサイトに合ったキーワードを設定します。

```json
{
  "main_keywords": [
    "あなたのメインKW1",
    "あなたのメインKW2",
    ...
  ],
  "sub_keywords": [
    "あなたのサブKW1",
    "あなたのサブKW2",
    ...
  ]
}
```

### ステップ2: 記事の自動生成

`generate-article-v2.py` を実行すると、自動的に未使用のキーワード組み合わせが選択され、記事が生成されます。

```bash
cd scripts
python3 generate-article-v2.py
```

### ステップ3: WordPressに投稿

生成された記事は `generated-article.html` に保存されます。これを `wordpress-poster.py` で投稿します。

```bash
WP_URL="https://example.com" \
WP_USER="admin" \
WP_APP_PASSWORD="your_password" \
python3 wordpress-poster.py
```

### ステップ4: GitHub Actionsで自動化

`.github/workflows/daily-ai-article.yml` を以下のように更新します。

```yaml
- name: Generate AI Article
  env:
    OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
  run: |
    cd scripts
    python3 generate-article-v2.py  # v2を使用
```

---

## メリット

### 1. 完全に重複のない記事

使用済みキーワードを自動記録するため、同じ内容の記事が生成されることはありません。

### 2. 5年以上の運用が可能

2100通りの組み合わせがあるため、毎日投稿しても **5年9ヶ月** 運用できます。

- 毎日1記事: 2100日 = 約5.8年
- 週3回投稿: 700週 = 約13.5年

### 3. SEOに最適化

多様なロングテールキーワードで記事を生成するため、幅広い検索クエリに対応できます。

### 4. 簡単なカスタマイズ

`keywords.json` を編集するだけで、任意のテーマに対応できます。

---

## カスタマイズ例

### 料理レシピサイトの場合

```json
{
  "main_keywords": [
    "簡単レシピ",
    "時短料理",
    "ヘルシー料理",
    "節約レシピ",
    "作り置きおかず"
  ],
  "sub_keywords": [
    "一人暮らし",
    "子供向け",
    "ダイエット",
    "高齢者",
    "初心者"
  ],
  "article_types": [
    {
      "type": "recipe",
      "title_pattern": "{main_keyword}｜{sub_keyword}におすすめの5選",
      "description": "レシピを紹介する記事"
    }
  ]
}
```

### ガジェットレビューサイトの場合

```json
{
  "main_keywords": [
    "スマートフォン",
    "ノートPC",
    "イヤホン",
    "スマートウォッチ",
    "タブレット"
  ],
  "sub_keywords": [
    "2024年最新",
    "コスパ最強",
    "高性能",
    "初心者向け",
    "ビジネス用"
  ],
  "article_types": [
    {
      "type": "review",
      "title_pattern": "{main_keyword}レビュー｜{sub_keyword}で選ぶベストモデル",
      "description": "製品レビュー記事"
    }
  ]
}
```

---

## トラブルシューティング

### Q: すべてのキーワード組み合わせを使い切ったらどうなる？

A: システムが自動的に `used_combinations` をリセットし、再度最初から使用できるようになります。

### Q: 特定のキーワード組み合わせを避けたい

A: `keywords.json` の `used_combinations` に手動で追加してください。

```json
{
  "used_combinations": [
    "避けたいメインKW|避けたいサブKW|避けたい記事タイプ"
  ]
}
```

### Q: 記事タイプを追加したい

A: `keywords.json` の `article_types` に新しいタイプを追加し、`keyword-manager.py` の `generate_prompt()` 関数にプロンプトを追加してください。

---

## まとめ

このキーワード管理システムにより、**長期間にわたって多様なコンテンツを自動生成**できます。SEO効果を最大化し、読者に飽きられないサイト運営が可能になります。

**プロジェクトステータス**: ✅ **完成・稼働準備完了**
